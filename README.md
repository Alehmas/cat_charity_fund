#  QRKot

##  Описание
QRKot - приложение для Благотворительного фонда. 

###  Проекты(CharityProject)
В Фонде QRKot может быть открыто несколько целевых проектов. У каждого проекта
есть название, описание и сумма, которую планируется собрать. После того, как
нужная сумма собрана — проект закрывается. Пожертвования в проекты поступают по
принципу First In, First Out: все пожертвования идут в проект, открытый раньше других;
когда этот проект набирает необходимую сумму и закрывается — пожертвования начинают
поступать в следующий проект.

### Пожертвования(Donation)
Каждый пользователь может сделать пожертвование и сопроводить его комментарием.
Пожертвования не целевые: они вносятся в фонд, а не в конкретный проект.
Каждое полученное пожертвование автоматически добавляется в первый открытый проект,
который ещё не набрал нужную сумму. Если пожертвование больше нужной суммы
или же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта.
При создании нового проекта все неинвестированные пожертвования автоматически
вкладываются в новый проект.

### Пользователи
Целевые проекты создаются администраторами сайта.
Любой пользователь может видеть список всех проектов, включая требуемые и уже внесенные суммы.
Это касается всех проектов — и открытых, и закрытых.
Зарегистрированные пользователи могут отправлять пожертвования и
просматривать список своих пожертвований.

Суперпользователь может:
- создавать проекты,
- удалять проекты, в которые не было внесено средств,
- изменять название и описание существующего проекта, устанавливать для него новую
  требуемую сумму (но не меньше уже внесённой).

## Подготовка и запуск проекта
**Шаг 1** Склонируйте репозиторий на локальную машину:
```bash
git@github.com:Oleg-2006/cat_charity_fund.git
```

**Шаг 2** Перейти в новую директорию. Инициализировать и активировать виртуальное окружение
```bash
cd cat_charity_fund/
python -m venv venv
source venv/Scripts/activate
```

**Шаг 3** Обновить pip и установить зависимости проекта
```bash
python -m pip install --upgrade pip
pip install -r requirements.txt
```

**Шаг 4** Добавьте .env файл:
```
APP_TITLE=Приложение QRKot
APP_DESCRIPTION=Приложение для Благотворительного фонда поддержки котиков
DATABASE_URL=sqlite+aiosqlite:///./fastapi.db
SECRET=<SECRET>
FIRST_SUPERUSER_EMAIL=<FIRST_SUPERUSER_EMAIL>
FIRST_SUPERUSER_PASSWORD=<FIRST_SUPERUSER_PASSWORD>
```

**Шаг 5** По необходимости создать и применить миграции
```bash
alembic revision --autogenerate -m "First migration" 
alembic upgrade head
```

**Шаг 6** Запустить приложение
```bash
uvicorn app.main:app --reload
```

##  Используемые технологии
- проект написан на Python с использованием FastAPI
- для управления пользователями FastAPI Users
- базы данны SQLite с изпользованием SQLAlchemy
- ASGI-сервера для запуска FastAPI  - Uvicorn
- для асинхронного подключения к SQLite - драйвер aiosqlite
- тестирование кода проекта pytest

## Примеры запросов
Примеры запросов, права доступа, возможные ответы доступны в подключенной к проекту [документации](http://127.0.0.1:8000/docs)

## Авторы
- [Олег Маслов](https://github.com/Oleg-2006)